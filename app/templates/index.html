{% extends 'base.html' %}
{% import "_macros.html" as macro %}

{% block main %}
    <div class="sep20"></div>
    <div class="sep20"></div>
    <div class="panel panel-default">
    <div class="box">
        <ul class="nav nav-pills">
            <li id="new">
                <a href="/?tab=new" class="tab">Lastest</a>
            </li>
            <li id="cn">
                <a href="/?tab=cn" class="tab">Chinese</a>
            </li>
            <li id="en">
                <a href="/?tab=en" class="tab">English</a>
            </li>
            <li id="jk">
                <a href="/?tab=jk" class="tab">Japan and South Korea</a>
            </li>
            <li id="ins">
                <a href="/?tab=ins" class="tab">Instrumental Music</a>
            </li>
            <li id="other">
                <a href="/?tab=other" class="tab">Other</a>
            </li>
        </ul>
    </div>
        <ul class="list-group">
                            {% for topic in topics %}
                                <li class="list-group-item cell">
                                  <div class="media">
                                      <div class="media-left">
                                          <a href="/member/{{ topic.get_user().username }}">
                                              <img class="media-object" src="{{ topic.get_user().avatar }}" data-holder-rendered="true" style="width: 48px; height: 48px;">
                                          </a>
                                      </div>
                                      <div class="media-body">
                                            <a href="/topic/{{ topic.id }}"><h5 class="media-heading">{{ topic.title }}</h5></a>
                                            <p>
                                                <span class="label label-primary">{{ topic.label }}</span>&nbsp; &hearts; &nbsp;
                                                <strong>{{ topic.username }}</strong>&nbsp; &hearts; &nbsp;
                                                <span class="text-muted">{{ moment(topic.date_created, local=True).fromNow() }}</span>&nbsp; &bull; &nbsp;
                                                {% if topic.last_reply %}
                                                    <span class="text-muted">last reply from <strong>{{ topic.last_reply }}</strong></span>
                                                {% endif %}
                                            </p>
                                     </div>
                                      <div class="media-right">
                                          <span class="badge">{{ topic.reply_num }}</span>
                                      </div>
                                  </div>
                              </li>
                              {% endfor %}
                            <li class="list-group-item cell"><i class="fa fa-angle-double-right"></i> <a href="/{{ tab }}">More about</a></li>
            </ul>
    </div>
{% endblock %}

{% block side %}
    <div class="panel panel-default">
          <div class="panel-heading">
            <sapn class="text-muted">Hot</sapn>
          </div>
          <div class="panel-body hot-panel">
            <table class="hot-list table table-striped table-hover">
            {% if hot_topics[0] != none %}
              {% for t in hot_topics %}
                  <tbody>
                    <tr>
                        <td width="5%">
                            <a href="/member/{{ t.get_user().username }}">
                               <img class="media-object" src="{{ t.get_user().avatar }}" data-holder-rendered="true" style="width: 24px; height: 24px;">
                            </a>
                        </td>
                        <td>
                            <a href="/topic/{{ t.id }}">{{ t.title }}</a>
                        </td>
                    </tr>
                  </tbody>
              {% endfor %}
            {% endif %}
            </table>
          </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script>
        $(document).ready(function () {
           var tab = "{{ tab }}";
            $("#"+tab).addClass("active");
    })
    </script>
{% endblock %}
